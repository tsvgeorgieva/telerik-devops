name: SemVer
on:
  workflow_call:
    inputs:
      version-format:
        required: true
        type: string
    outputs:
      build-version:
        description: "The current build version"
        value: ${{ jobs.semver.outputs.build-version }}

jobs:
  semver:
    runs-on: ubuntu-latest
    outputs:
      build-version: ${{ steps.version.outputs.version }}
    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - name: Version
      id: version
      uses: paulhatch/semantic-version@v4.0.2
    - name: Print version
      run: |
        echo ${{ steps.version.outputs.version }}
        echo ${{ steps.version.outputs.version_tag }}
        echo ${{ steps.version.outputs.major }}
        echo ${{ steps.version.outputs.changed }}